{% load static %}
<!DOCTYPE html>
<html>
<head>
  <title>Admin Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="bg-light">

<div class="container-fluid p-4">

  <!-- Cards -->
  <div class="row g-3 mb-4">
    <div class="col-md-4">
      <div class="card shadow-sm border-0">
        <div class="card-body">
          <h6>Total Purchase</h6>
          <h3 class="text-danger">৳ {{ total_purchase }}</h3>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card shadow-sm border-0">
        <div class="card-body">
          <h6>Total Sales</h6>
          <h3 class="text-success">৳ {{ total_sales }}</h3>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="card shadow-sm border-0">
        <div class="card-body">
          <h6>Profit</h6>
          <h3 class="text-primary">৳ {{ profit }}</h3>
        </div>
      </div>
    </div>
  </div>

  <!-- Chart -->
  <div class="card shadow-sm border-0">
    <div class="card-body">
      <h5 class="mb-3">Monthly Purchase vs Sales</h5>
      <canvas id="dashboardChart" height="100"></canvas>
    </div>
  </div>

</div>

<script>
const labels = [
{% for p in purchase_chart %}
  "{{ p.month }}",
{% endfor %}
];

const purchaseData = [
{% for p in purchase_chart %}
  {{ p.total }},
{% endfor %}
];


const salesData = [
{% for s in sales_chart %}
  {{ s.total }},
{% endfor %}
];

new Chart(document.getElementById('dashboardChart'), {
  type: 'bar',
  data: {
    labels: labels,
    datasets: [
      {
        label: 'Purchase',
        data: purchaseData,
      },
      {
        label: 'Sales',
        data: salesData,
      }
    ]
  }
});
</script>

</body>
</html>
